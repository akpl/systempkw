<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!-- Bootstrap Core CSS -->
    <link href="/template/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- MetisMenu CSS -->
    <link href="/template/bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link href="/template/dist/css/sb-admin-2.css" rel="stylesheet" />

    <!-- Custom Fonts -->
    <link href="/template/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

    <link href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css" rel="stylesheet" />
    <script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>

    <link href="/template/bower_components/morrisjs/morris.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- jQuery -->
    <script src="/template/bower_components/jquery/dist/jquery.min.js"></script>

    <script src="/template/bower_components/raphael/raphael-min.js"></script>
    <script src="/template/bower_components/morrisjs/morris.min.js"></script>


    <!-- --------------------------------------------------------  -->

    <!-- Mobile Specific Metas
   ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="img2/favicon.png"/>

    <!-- CSS
    ================================================== -->
    <!-- Bootstrap css file-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Font awesome css file-->
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <!-- Superslide css file-->
    <link rel="stylesheet" href="css/superslides.css">
    <!-- Slick slider css file -->
    <link href="css/slick.css" rel="stylesheet">
    <!-- smooth animate css file -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- Elastic grid css file -->
    <link rel="stylesheet" href="css/elastic_grid.css">
    <!-- Circle counter cdn css file -->
    <link rel='stylesheet prefetch' href='https://cdn.rawgit.com/pguso/jquery-plugin-circliful/master/css/jquery.circliful.css'>
    <!-- Default Theme css file -->
    <link id="orginal" href="css/themes/default-theme.css" rel="stylesheet">
    <!-- Main structure css file -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Varela' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>
<body>

<!-- BEGAIN PRELOADER -->
<div id="preloader">
    <div id="status">&nbsp;</div>
</div>
<!-- END PRELOADER -->

<!-- SCROLL TOP BUTTON -->
<a class="scrollToTop" href="#"><i class="fa fa-angle-up"></i></a>
<!-- END SCROLL TOP BUTTON -->

<!--=========== BEGIN HEADER SECTION ================-->
<header id="header">
    <!-- BEGIN MENU -->
    <div class="menu_area">
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container" style="background: #333; width: 100%">
                <div class="navbar-header">
                    <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <!-- LOGO -->

                    <!-- TEXT BASED LOGO -->

                    <a class="navbar-brand"  href="/"><span   style="background:#333; color: #E9E8E7">System</span><span style="background:#333; color:  #D4213D">Wyborczy    </span></a>

                    <!-- IMG BASED LOGO  -->
                    <!--  <a class="navbar-brand" href="#"><img src="img2/logo.png" alt="logo"></a> -->


                </div>

            </div>
        </nav>
    </div>
    <!-- END MENU -->

</header>
<!--=========== End HEADER SECTION ================-->

<section id="contact">
    <div class="container">

<br> <br> <br>

<div class="row">
    <div class="heading">
        <h2 class="wow fadeInLeftBig"> Wyniki Parlamentarne</h2>

    </div>
</div>
<div class="row">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="heading">
                <h4 class="wow fadeInLeftBig"> Liczba Posłów</h4>

            </div>
            <div class="panel-body">
                <div class="ct-chart ct-perfect-fourth" id="wykres"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="heading">
                <h4 class="wow fadeInLeftBig"> Frekwencja</h4>

            </div>
            <div class="panel-body">
                <div class="ct-chart ct-perfect-fourth" id="frekwencja"></div>
            </div>
            <div class="panel-footer">
                Frekwencja w kraju: <strong th:text="${frekwencja[0]}"></strong>%
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="heading">
                <h4 class="wow fadeInLeftBig"> Rozkład mandatów w Sejmie</h4>

            </div>
            <div class="panel-body">
                <div id="sejm"></div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="heading">
                <h4 class="wow fadeInLeftBig"> Lista komitetów</h4>

            </div>
            <div class="panel-body">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Nazwa</th>
                        <th>Liczba posłów</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="komitet : ${komitety}">
                        <td>
                            <span th:text="${komitet.numer}"></span>
                            <span th:style="'color: ' + ${komitet.kolor}">&#9646;</span>
                        </td>
                        <td th:text="${komitet.nazwa}"></td>
                        <td th:text="${komitet.liczbaPoslow}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
        </div>
</section>

<!-- Javascript Files
  ================================================== -->

<!-- initialize jQuery Library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!-- Google map -->
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="js/jquery.ui.map.js"></script>
<!-- For smooth animatin  -->
<script src="js/wow.min.js"></script>
<!-- Bootstrap js -->
<script src="js/bootstrap.min.js"></script>
<!-- superslides slider -->
<script src="js/jquery.superslides.min.js" type="text/javascript"></script>
<!-- slick slider -->
<script src="js/slick.min.js"></script>
<!-- for circle counter -->
<script src='https://cdn.rawgit.com/pguso/jquery-plugin-circliful/master/js/jquery.circliful.min.js'></script>
<!-- for portfolio filter gallery -->
<script src="js/modernizr.custom.js"></script>
<script src="js/classie.js"></script>
<script src="js/elastic_grid.min.js"></script>
<script src="js/portfolio_slider.js"></script>
<script src="js/coundown-timer.js"></script>

<!-- Custom js-->
<script src="js/custom.js"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    var komitety = /*[[${komitety}]]*/ [];

    (function narysujRozkladMiejsc() {
        var allSeatsCount = 400;

        var seatColors = [];
        for (var partyNumber = 0; partyNumber < komitety.length; partyNumber++) {
            var seatsForParty = komitety[partyNumber].liczbaPoslow;
            for (var seat = 0; seat < seatsForParty; seat++) {
                seatColors.push(komitety[partyNumber].kolor);
            }
        }
        var emptySeats = allSeatsCount - seatColors.length;
        for (var seat = 0; seat < emptySeats; seat++) {
            seatColors.push('gray');
        }

        var rows = 10;
        var columns = allSeatsCount / rows - 1;
        var canvasWidth = 1008;
        var canvasHeight = 600;

        var seatRadius = 6;

        var startPointX = canvasWidth / 2;
        var startPointY = canvasHeight - seatRadius;

        var lineLength = startPointX - seatRadius;
        var sceneRadius = 200;

        var canvas = Raphael("sejm");
        canvas.setViewBox(0, 0, canvasWidth, canvasHeight);

        var svg = document.querySelector("#sejm svg");
        svg.removeAttribute("width");
        svg.removeAttribute("height");

        for (var column = 0; column <= columns; column++) {
            var sinAlpha = Math.sin(Math.PI * column / columns);
            var cosAlpha = Math.cos(Math.PI * column / columns);

            for (var seatRow = 0; seatRow < rows; seatRow++) {
                var distanceFromCenter = (lineLength - sceneRadius) / rows * seatRow + sceneRadius;
                var seatX = startPointX - (distanceFromCenter) * cosAlpha;
                var seatY = startPointY - (distanceFromCenter) * sinAlpha;
                var seat = canvas.circle(seatX, seatY, seatRadius);
                seat.attr({
                    fill: seatColors[column * rows + seatRow],
                    "stroke-width": "0"
                });
            }
        }
    }());

    var frekwencja =
    {
        series: /*[[${frekwencja}]]*/ [50, 50]
    };

    new Chartist.Pie('#frekwencja', frekwencja,
            {
                donut: true
            });


    var kolory = [];
    var sumaMandatow = 0;
    for(var komitet = 0; komitet < komitety.length; komitet++) {
        kolory.push(komitety[komitet].kolor);
        sumaMandatow += komitety[komitet].liczbaPoslow;
    }
    var nrKomitetu = 0;
    new Morris.Bar({
        element: 'wykres',
        data: komitety,
        xkey: 'nazwa',
        ykeys: ['liczbaPoslow'],
        labels: ['Liczba mandatów'],
        resize: true,
        stacked: true,
        barColors: function (row, series, type) {
            if(type == 'label') {
                nrKomitetu = 0;
                return '#337ab7';
            }

            return kolory[nrKomitetu++];
        },
        hoverCallback: function (index, options, content, row) {
            return content
                    + "<div class='morris-hover-point'>Procent mandatów: "
                    + (row.liczbaPoslow / sumaMandatow * 100).toFixed(2)
                    + "%</div>";
        }
    });
    /*]]>*/
</script>

</body>
</html>